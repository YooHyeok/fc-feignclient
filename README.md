# Feign Client

Feign이란 선언적으로 사용할 수 있는 클라이언트이다.  
프로그래밍을 하다 보면 외부 컴포넌트와 통신을 할수밖에 없다.  
외부 컴포넌트와 통신을 하는데 있어 여러개의 클라이언트가 있다.  
대표적으로 RestTemplate와 같은 클라이언트를 사용할것이다.  
요 근래에는 RestTemplate보다 Feign 이라는 클라이언트를 사용해 외부 컴포넌트와의 통신을 많이 하게 된다.  

## Feign Feature
1) `Connection/ReadTimeout`  
   외부서버와 통신 시 컴포넌트별로 Timeout 설정을 할 수 가 있다.
2) `Feign Interceptor`  
   외부 요청을 내보낼 때, 어떤 값들로 내보냈는지 로깅하는 등  
   외부로 요청이 나가기 전에 만약 공통적으로 처리해야 하는 부분이 있다면 Interceptor를 재정의하여 처리가 가능하다.  
   실제 외부 요청을 했을 때 실패가 발생할 수 있고, 그에 대한 확인 요청 보다는  
   내부적으로 직접 값을 모니터링하여 관리하기 위한 용도로 인터셉터 설정을 한다.
   또한 여러 요청에 대한 공통적인 헤더 설정을 인터셉터에서 설정하여 관리하면 코드를 유지보수하는데 있어 편해진다.
3) `Feign Logger`  
   request/response등 운영을 하기 위한 적절한 log를 남길 수 있다.  
   log를 통해 내가 정말 필요한 값들이 뭔지 요청했을 때 어떤 값들을 요청했고,   
   그 응답으로는 어떤 값들이 왔고 또 요청 시간이 얼마나 걸렸는지 등등을 다 처리할 수 있다.
4) `Feign ErrorDecoder`  
   요청에 대해 정상 응답이 아닌 경우 적절한 핸들링을 할 수 있다.  
   기본적으로 400~500 사이와 같은 HTTP Response가 왔을 경우 ErrorDecoder에서 정의해 놓은   
   특정 Exception으로 한번 더 Wrapping을 한다던지,
   혹은 내부적으로 외부에서 404가 날아왔을때 해당 에러를 바로 Client에게 보내줄 수 없으니
   정의해놓은 특정 Error값으로 한번 Wrapping하여 Exception을 던져주는 등에 대한 작업을  
   ErrorDecoder에서 설정할 수 있다.
